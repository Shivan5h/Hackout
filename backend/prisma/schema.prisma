generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                 Int                @id @default(autoincrement())
  email              String             @unique
  password           String             // Store the hashed password
  fullName           String             // User's full name
  forms              CropRotationForm[]
  soilHealthForms    SoilHealthForm[]   // Relation to SoilHealthForm
  yieldPredictions   YieldPrediction[]  // Relation to YieldPrediction
}

model CropRotationForm {
  id                                   Int       @id @default(autoincrement())
  user                                 User      @relation(fields: [userId], references: [id])
  userId                               Int
  previousCrop                         Int
  cropFamilyCompatibility              Int
  nutrientDemandCompatibility          Float
  pestDiseaseCarryoverRisk             Int
  soilNutrientDepletionIndex           Float
  soilFertilityRestorationPotential    Float
  climateSuitabilityOverlap            Float
  moistureCompatibility                Float
  rotationCycleDuration                Int
  coverCropUse                         Int
  greenManureImpact                    Float
  previousYield                        Float
  previousCropHealthScore              Float
  rotationSuccessRate                  Float
}

model SoilHealthForm {
  id                     Int     @id @default(autoincrement())
  user                   User    @relation(fields: [userId], references: [id])
  userId                 Int
  cropType               String
  soilNitrogen           Float
  soilPhosphorus         Float
  soilPotassium          Float
  soilOrganicMatter      Float
  soilPH                 Float
  soilTexture            String
  temperature            Float
  previousYield          Float
  predictionScore        Float
}

model YieldPrediction {
  id                     Int     @id @default(autoincrement())
  user                   User    @relation(fields: [userId], references: [id])
  userId                 Int
  cropType               String
  soilNitrogen           Float
  soilPhosphorus         Float
  soilPotassium          Float
  soilOrganicMatter      Float
  soilPH                 Float
  soilTexture            String
  temperature            Float
  previousYield          Float
  predictionScore        Float
}
